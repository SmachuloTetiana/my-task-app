(this["webpackJsonpmy-task-app"]=this["webpackJsonpmy-task-app"]||[]).push([[0],{28:function(e,t,a){e.exports=a(41)},37:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(17),l=a.n(s),c=a(9),u=a(8),i=(a(37),a(12)),o=(a(38),function(e){return n.a.createElement("header",{className:"Header"},n.a.createElement("nav",{className:"navbar navbar-expand-sm bg-dark navbar-dark"},n.a.createElement("ul",{className:"navbar-nav"},e.currentUser?n.a.createElement(n.a.Fragment,null,n.a.createElement("li",{className:"nav-item"},n.a.createElement(u.b,{activeClassName:"active",className:"nav-link",exact:!0,to:"/"},"Home")),n.a.createElement("button",{type:"button",className:"btn btn-primary ml-auto",onClick:function(t){t.preventDefault(),e.logOutUser()}},"Log Out")):n.a.createElement(n.a.Fragment,null,n.a.createElement("li",{className:"nav-item"},n.a.createElement(u.b,{activeClassName:"active",className:"nav-link",to:"/register"},"Register")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(u.b,{activeClassName:"active",className:"nav-link",to:"/login"},"Login"))))))}),m=Object(c.b)((function(e){return{currentUser:e.auth.currentUser}}),(function(e){return{logOutUser:function(){return e({type:"LOG_OUT"})}}}))(o),d=a(7),E=function(e){var t,a,s=Object(r.useState)(!1),l=Object(d.a)(s,2),c=l[0],u=l[1],i=Object(r.useState)(!1),o=Object(d.a)(i,2),m=o[0],E=o[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"task d-flex flex-row justify-content-between align-items-center"},c?n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{className:"d-flex flex-row justify-content-between",style:{flex:"auto"}},n.a.createElement("input",{className:"form-control",type:"text",defaultValue:e.text,onChange:function(e){return t=e.target.value}}),n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return a=e.id,r=t,e.saveEditTask(a,r),void u(!c);var a,r}},"Save"))):n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null,e.text),e.sharedWith.includes(e.currentUserId)?n.a.createElement("span",{className:"shared-with"},n.a.createElement("strong",null,"Shared with me:")," ",e.ownerEmail):n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{type:"button",className:"btn btn-primary ml-auto",onClick:function(){return e.id,E(!m)}},"Share the Task"),n.a.createElement("button",{type:"button",className:"btn btn-dark",disabled:m,onClick:function(){return e.id,u(!c)}},"Edit"),n.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){return e.deleteTask(e.id)}},"Delete")))),m?n.a.createElement("form",{className:"d-flex shared-form"},n.a.createElement("input",{className:"form-control",type:"email",name:"email",placeholder:"User email",value:a,onChange:function(e){return a=e.target.value}}),n.a.createElement("button",{type:"button",className:"btn btn-primary ml-3",onClick:function(){return function(t,a){e.shareTask(t,a),E(!m)}(e.id,a)}},"Share")):null)},f=function(e){var t=e.currentUser,a=e.deleteTask,r=e.saveEditTask,s=e.syncCurrentUser,l=e.shareTask,c=function(e){a(e),s(t.id)},u=function(e,a){r(e,a),s(t.id)};return n.a.createElement("div",{className:"tasks-list"},t.tasks.map((function(e,a){return n.a.createElement(E,Object.assign({},e,{key:a,currentUserId:t.id,deleteTask:c,saveEditTask:u,shareTask:l}))})))},b=function(e){var t=Object(r.useState)(),a=Object(d.a)(t,2),s=a[0],l=a[1];return e.currentUser?n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"task-wrapper"},n.a.createElement("h2",{className:"task-title"},"To do"),n.a.createElement(f,e),n.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.addTask(s),l("")}},n.a.createElement("div",{className:"form-group"},n.a.createElement("textarea",{required:!0,placeholder:"Add your task name...",name:"name",className:"form-control",value:s,onChange:function(e){return l(e.target.value)}})),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Add Task")))):n.a.createElement(i.a,{to:"/login"})},p=Object(c.b)((function(e){return{currentUser:e.auth.currentUser}}),(function(e){return{addTask:function(t){return e({type:"ADD_TASK",payload:t})},deleteTask:function(t){return e(function(e){return{type:"DELETE_TASK",id:e}}(t))},saveEditTask:function(t,a){return e(function(e,t){return{type:"SAVE_EDIT_TASK",id:e,newTask:t}}(t,a))},syncCurrentUser:function(t){return e(function(e){return{type:"SYNC_CURRENT_USER",value:e}}(t))},shareTask:function(t,a){return e(function(e,t){return{type:"SHARE_TASK",id:e,shareUserEmail:t}}(t,a))}}}))(b),v=a(15),g=a(2),h=function(e){var t=Object(r.useState)({email:"",password:""}),a=Object(d.a)(t,2),s=a[0],l=a[1],c=function(e){e.preventDefault(),l(Object(g.a)({},s,Object(v.a)({},e.target.name,e.target.value)))};return e.currentUser?n.a.createElement(i.a,{to:"/"}):n.a.createElement("div",{className:"container"},n.a.createElement("form",{onSubmit:function(t){t.preventDefault(),l({email:s.email,password:s.password}),e.setRegisterUser(s),e.history.push("/login")}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"email"},"Name"),n.a.createElement("input",{type:"email",name:"email",required:!0,value:s.email,onChange:c,className:"form-control",placeholder:"E-mail"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"text",name:"password",required:!0,value:s.password,onChange:c,className:"form-control",placeholder:"Password"})),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Register")))},N=Object(c.b)((function(e){return{users:e.auth.users,currentUser:e.auth.currentUser}}),(function(e){return{setRegisterUser:function(t){return e({type:"REGISTER",value:t})}}}))(h),O=function(e){var t=Object(r.useState)({email:"",password:""}),a=Object(d.a)(t,2),s=a[0],l=a[1],c=Object(r.useState)(null),u=Object(d.a)(c,2),o=u[0],m=u[1],E=Object(r.useState)(null),f=Object(d.a)(E,2),b=f[0],p=f[1],h=function(e){e.preventDefault(),l(Object(g.a)({},s,Object(v.a)({},e.target.name,e.target.value)))};return e.currentUser?n.a.createElement(i.a,{to:"/"}):n.a.createElement("div",{className:"container"},o?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"alert alert-danger"},o)):null,b?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"alert alert-success"},b)):null,n.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=s.email,r=s.password;e.users.forEach((function(t){a!==t.email||r!==t.password?m("Your credentials are invalid!"):(m(null),p("You are logged in."),e.setCurrentUser(t),e.history.push("/"))}))}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"email"},"Name"),n.a.createElement("input",{type:"email",name:"email",value:s.email,required:!0,onChange:h,className:"form-control",placeholder:"E-mail"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",name:"password",value:s.password,required:!0,onChange:h,className:"form-control",placeholder:"Password"})),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login")))},k=Object(c.b)((function(e){return{users:e.auth.users,currentUser:e.auth.currentUser}}),(function(e){return{setCurrentUser:function(t){return e({type:"LOGIN",value:t})}}}))(O);var S=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(m,null),n.a.createElement(i.d,null,n.a.createElement(i.b,{path:"/",exact:!0,component:p}),n.a.createElement(i.b,{path:"/register",component:N}),n.a.createElement(i.b,{path:"/login",component:k})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var y=a(14),j=a(13),w=a(23),T=JSON.parse(localStorage.getItem("managerDB"))||{currentUser:null,users:[],tasks:[]},U=Object(y.b)({auth:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"REGISTER":var n=r.value;return n.id=w("user-"),t=Object(g.a)({},a,{users:[].concat(Object(j.a)(a.users),[n])}),localStorage.setItem("managerDB",JSON.stringify(t)),t;case"LOGIN":var s=a.tasks.filter((function(e){return e.userId===r.value.id||e.sharedWith.includes(r.value.id)})).map((function(e){if(e.sharedWith.includes(r.value.id)){var t=a.users.find((function(t){return t.id===e.userId}));e.ownerEmail=t.email}return e})),l=Object(g.a)({},r.value,{tasks:s});return e=Object(g.a)({},a,{currentUser:l}),localStorage.setItem("managerDB",JSON.stringify(e)),e;case"LOG_OUT":return e=Object(g.a)({},a,{currentUser:null}),localStorage.setItem("managerDB",JSON.stringify(e)),e;case"SYNC_CURRENT_USER":var c=JSON.parse(localStorage.getItem("managerDB")),u=c.users.find((function(e){return e.id===r.value}));return u.tasks=c.tasks.filter((function(e){return e.userId===r.value||e.sharedWith.includes(r.value)})),e=Object(g.a)({},a,{currentUser:u}),localStorage.setItem("managerDB",JSON.stringify(e)),e;case"ADD_TASK":var i=r.payload,o={text:i,id:w("task-"),userId:a.currentUser.id,sharedWith:[]};return t=Object(g.a)({},a,{tasks:[].concat(Object(j.a)(a.tasks),[o]),currentUser:Object(g.a)({},a.currentUser,{tasks:[].concat(Object(j.a)(a.currentUser.tasks),[o])})}),localStorage.setItem("managerDB",JSON.stringify(t)),t;case"DELETE_TASK":return a.tasks.filter((function(e,t){return e.id===r.id?a.tasks.splice(t,1):null})),t=Object(g.a)({},a,{tasks:Object(j.a)(a.tasks)}),localStorage.setItem("managerDB",JSON.stringify(t)),t;case"SAVE_EDIT_TASK":return a.tasks.forEach((function(e){e.id===r.id&&r.newTask&&(e.text=r.newTask)})),t=Object(g.a)({},a,{tasks:Object(j.a)(a.tasks)}),localStorage.setItem("managerDB",JSON.stringify(t)),t;case"SHARE_TASK":var m=a.users.find((function(e){return e.email===r.shareUserEmail}));return m&&a.tasks.forEach((function(e){e.id===r.id&&!e.sharedWith.includes(m.id)&&e.sharedWith.push(m.id)})),t=Object(g.a)({},a,{tasks:Object(j.a)(a.tasks)}),localStorage.setItem("managerDB",JSON.stringify(t)),t;default:return a}}}),D=Object(y.c)(U,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(n.a.createElement(c.a,{store:D},n.a.createElement(u.a,null,n.a.createElement(S,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.dbdb303c.chunk.js.map